let map = `                                                                                                                                                                   |
                                         +-----------------------+                         +-------------------------------------------------------------------------------------------+
                                         |                       |                         |                                                                       |                   |
                     +-------------------|-----------------------|-----------------------+ +-----------------------------------------------------------------------|-----+             |
                     |                   |                       |                       |                                                                         |     |             |
         +-----------+                   |             +---------------------------------|-------------------------+                                               |     |             |
         |                               |             |         |                       |                         |                                               |     |             |
         |         +-----+               |             |         |                       |   +---------------------|---------------------------------------+       |     |             |
         |         |     |               |             |         |                       |   |                     |                                       |       |     |             |
         |         |     |               |         +---|-------+ +---------------------------|---------------------------------------------------------------------|-----|-------------+
         |         |     |               |         |   |       |                         |   |                     |                                       |       |     |
 +-------|-------------------------------|-+   +-+ |   |       |       +---------------------+                     +-+                                     | +-----------------------+ +-------------+
 |       |         |     |               | |   | | |   |       |       |                 |                           |                                     | |     |     |           | |             |
 |   +---|---------|-----------------------|---|---|---|---------------|-----------------+                           |                                     | |     |     |           | |             |
 |   |   |         |     |               | |   | | |   |       |       |                                             |                                     | |     |     |           | |             |
 |   |   |       +-|-----+               | |   | | |   |       |       |                                             +-------------------------------------|-----------------------------------------|-+
 |   |   |       | |                     | |   | | |   |       |       |                                                                                   | |     |     |           | |             | |
 |   +-------------|-----------------------|---|---|----Y------|-------|-----------------------------------------------------------+                       | |     |     |           | |             | |
 |       |       | |                     | |   | | |   |       |       |                                                           |                       | |     |     |           | |             | |
 |       |       | |                     | |   | | |   |       |       |                         +-----------------------------------------------------------|-----|-------------------|-+           | |
 |       |       | |                     | |   | | |   |       |       |                         |                                 |                       | |     |     |           | | |           | |
 |       |     +---------------------------|-----------|---------------|-------------------------------------------------------------------------------------|-----------------+     | | |           | |
 |       |     | | |                     | |   | | |   |       |       |                         |                                 |                       | |     |     |     |     | | |           | |
 |       |     | | |                     | |   | | |   |       |       |                         | +---------------------------+   |                       | |     |     |     |     | | |           | |
 |       |     | | |                     | |   | | |   |       |       |                         | |                           |   |                       | |     |     |     |     | | |           | |
 +-+     |     | | |                     | |   | | |   |       |       |     +-+         +-------------------------------------|-----------------------------------|-----+     |     +-----+         | |
   |     |     | | |                     | |   | | |   |       |       |     | |         |       | |                           |   |                       | |     |           |       | | |         | |
   |     |     | | |                     | |   | | |   |       |       |     | |         |       | |                           |   |                       | |     |           |       | | |         | |
   |     |     | | |                     | |   | | |   |       |       |     | |         |       | |                           |   |                       | |     |           |       | | |         | |
   |     |     | | |                   +-|-|-------------------|-------------|-|---------|---+   | |                           |   |                       | |     |           |       | | |         | |
   |     |     | | |                   | | |   | | |   |       |       |     | |         |   |   | |                           |   |                       | |     |           |       | | |         | |
   |     |     +---|-+                 | | |   | | |   | +-----|-------------|-----------|---|-------------------------------------------------------------|-|-----|-----------|-------|-|---+       | |
   |     |       | | |                 | | |   | | |   | |     |       |     | |         |   |   | |                           |   |                       | |     |           |       | | | |       | |
   |     |     +-|---|---+             | | |   | | |   | |     +-------|-----|-|---------|-------|-|-----+                     |   |                       | |     |           |       | | +-|---+   | |
   |     |     | | | |   |             | | |   | | |   | |             |     | |         |   |   | |     |                     |   |                       | |     |           |       | |   |   |   | |
   |     |     | | | |   |             | | |   | | |   | |           +-|---+ | +---------|---|-----|-------------------------------|-----------------------|-----------+     +-|-------|-|---+   |   | |
   |     |     | | | |   |             | | |   | | |   | |           | |   | |           |   |   | |     |                     |   |                       | |     |   |     | |       | |       |   | |
   |     |     | | | | +-|---------------|-------|-----|-------------|-----|---------+   |   | +-|---+   | +-------------------+   |     +-------------------|---------|-+   | |       | |       |   | |
   |     |     | | | | | |             | | |   | | |   | |           | |   | |       |   |   | | | | |   | |                       |     |                 | |     |   | |   | |       | |       |   | |
   |     | +-------+ | | |             | | |   | | |   | |           | |   | |       |   |   | | | | |   | |                       |     |                 | |     |   | |   | +-------|---+     |   | |
   |     | |   | |   | | |             | | |   | | |   | |           | |   | |       |   |   | | | | |   | |                       |     |                 | |     |   | |   |         | | |     |   | |
   |     | |   | |   | | |             | +-|---|-|-------|-----------|-----|---------|-------|-------|-+ | |   +-+                 |     |                 | |     +-----------+       | | |   +-+   | |
   |     | |   | |   | | |             |   |   | | |   | |           | |   | |       |   |   | | | | | | | |   | |                 |     |                 | |         | |   | |       | | |   |     | |
   |     | |   | |   | | |             |   |   | | |   | |           | |   | +-----------------|---|---|-|---+ | +-----------------------|-------+   +-+   | |       +-|-|---|-|-------|-+ |   | +-+ | |
   |     | |   | |   | | |             |   |   | | |   | |           | |   |         |   |   | | | | | | | | | |                   |     |       |   | |   | |       | | |   | |       |   |   | | | | |
   |     | |   | |   | | |             |   |   +---|-----|-------------|---|-+   +-------|---------+ | | | | | |                   |     |       |   | |   | |       | | |   | |       |   |   +-+ | | |
   |     | |   | |   | | |             |   |     | |   | |           | |   | |   |   |   |   | | |   | | | | | |                   |     |       |   | |   | |       | | |   | |       |   |       | | |
   |   +-|-|-----|---|-|-|-------------------------------------------|-----|-|-------+   |   | | | +-----|---|---------+           |     | +-----------|---------+   | | |   | |       |   |       | | |
   |   | | |   | |   | | |             |   |     | |   | |           | |   | |   |       |   | | | | | | | | | |       |           |     | |     |   | |   | |   |   | | |   | |       |   |       | | |
 +-|---|-|-|-+ | +---|---|-------------------------+   | |           | |   | +---|-------|---|-+ +-|-|---|-|-----------|-----------|-----|-|-----|---|-|-----+   | +---|-----|---+     |   |       | | |
 | |   | | | | |     | | |             |   |     |     | |           | |   |     |       |   |     | | | | | | |       |           |     | |     |   | |   |     | | | | |   | | |     |   |       | | |
 | |   | | | | | +-----|-------------------+     |     | |           | +---|---------+   |   |     | | | | | | |       |         +-------|-|-----|-----|-------+ | | | +-+   | | |     |   |       | | |
 | |   | | | | | |   | | |             |         |     | |           |     |     |   |   |   |     | | | | | | |       |         | |     | |     |   | |   |   | | | |       | | |     |   |       | | |
 | |   | | | | | |   | | | +---------------------|-+   | |           |     |     |   | +-----|---+ | | | | | | |       |         | |     | |     |   | |   |   | | | |       | | |     |   |       | | |
 | |   | | | | | |   | | | |           |         | |   | |           |     |     |   | | |   |   | | | | | | | |       |         | |     | |     |   | |   |   | | | |       | | |     |   |       | | |
 | |   | | | | | |   | | | |           |         | |   | |           |     |     | +-|-|-----|---|---|-|-|-|-|-------------------+ |     | |     |   | |   |   | | +-|-----+ | | |     |   |       | | |
 | |   | | | | | |   | | | |           |         | |   | |           |     |     | | | | |   |   | | | | | | | |       |           |     | |     |   | |   |   | |   |     | | | |     |   |       | | |
 | |   | | | | +-|---|---------------------------|-------------+     |     +---+ | | | | |   |   | | | | | | | | +-----|-----------|-----|-------|---|---+ |   | |   |     | | | |     |   |       | | |
 | |   | | | |   |   | | | |           |         | |   | |     |     |         | | | | | |   |   | | | | | | | | |     |           |     | |     |   | | | |   | |   |     | | | |     |   |       | | |
 | |   | | +---------|-|-|-----------------------|-|-----------|---------------|-----|---|---------|---|-|---|-|-|-----|-----------|-------|---+ |   | | | |   | |   |     | | | |     |   |       | | |
 | |   | |   |   |   | | | |           |         | |   | |     |     |         | | | | | |   |   | | | | | | | | |     |           |     | |   | |   E | | |   | |   |     | | | |     |   |       | | |
 | |   | |   |   |   | | | |     +-----|-----------|---|---------------------+ | | | | | |   |   | | | | | | | | |     |           |     | |   | |   | | | |   +-|---|-+   | | | |     |   |       | | |
 | |   | |   |   |   | | | |     |     |         | |   | |     |     |       | | | | | | |   |   | | | | | | | | |     |           |     | |   | |   | | | |     |   | |   | | | |     |   |       | | |
 | |   +-|-------------|-|-|-----|----------U----|-|---|-------|-------------|-|-|---|---+   |   | | | | | | | | |     |           |     | |   | |   | | | |     |   | |   | | | |     |   |       | | |
 | |     |   |   |   | | | |     |     |         | |   | |     |     |       | | | | | |     |   | | | | | | | | |     |           |     | |   | |   | | | |     |   | |   | | | |     |   |       | | |
 | |     |   |   |   | | | |     +---------------|---------------------------|-----|---------|-----|-------------|-----------------+     | |   | |   | | | |     | +-+ | +-|---|-----------------+ | | |
 | |     |   |   |   | | | |           |         | |   | |     |     |       | | | | | |     |   | | | | | | | | |     |                 | |   | |   | | | |     | |   | | | | | |     |   |     | | | |
 | |     | +-|-----+ | +-|-+     +---------------|-|---+ |     |     |       | | | | | |     |   | | | | | | | +-------|-----------------------|-|---|---|-|-----|---------|-|---------|---------+ T | |
 | |     | | |   | | |   |       |     |         | |     |     |     |       | | | | | |     |   | | | | | | |   |     |                 | |   | |   | | | |     | |   | | | | | |     |   |         | |
 | |     | | |   | | |   |       |     |         | |     |     |     |       | | | | | |     |   | | | | | | |   |     |                 | |   | |   | | | |     | |   | | | | | | +-------------+   | |
 | |     | | |   | | |   |       |     |         | |     |     |     |       | | | | | |     |   | | | | | | |   |     |                 | |   | |   | | | |     | |   | | | | | | |   |   |     |   | |
 | |     | | |   | | | +-----------------------+ | |     |     |     |     +---+ | | +-|-----|---|-|-|-+ | | |   |     |         +-------|---+ +-+ +-|-|-+ |     | +---+ | | | | | |   |   |     |   | |
 | |     | | |   | | | | |       |     |       | | |     |     |     |     | |   | |   |     |   | | |   | | |   |     |         |       | | |     | | |   |     |       | | | | | |   |   |     |   | |
 | |     | | |   | | +-----------|-----|-----------|-----|-----|-----------------|-|---|-------------|---|---|---|-----|---------|---------|-------|-----------+ |     +---|-|-|-|-|---|---|-----+   | |
 | |     | | |   | |   | |       |     |       | | |     |     |     |     | |   | |   |     |   | | |   | | |   |     |         |       | | |     | | |   |   | |     | | | | | | |   |   |         | |
 | |     | | |   | |   | |     +---+   |       | | |     |   +-|-----|-----|-------|---------|-+ | | |   | | +---|-----|---------|---------|-------------+ |   | | +-----------|---|-------|-----+   | |
 | |     | | |   | |   | |     | | |   |       | | |     |   | |     |     | |   | |   |     | | | | |   | |     |     |         |       | | |     | | | | |   | | |   | | | | | | |   |   |     |   | |
 +---------|-----|-|-----|-------|-|-----------|-|-|-----|---|-------|-------|---|-|--D------|-|---|-------------|---------+     |     +-------------|-|-----------------|-|---|-|-|-------|-------+ | |
   |     | | |   | |   | |     | | |   |       | | |     |   | |     |     | |   | |   |     | | | | |   | |     |     |   |     |     | | | |     | | | | |   | | |   | | | | | | |   |   |     | | | |
   |     | | |   | |   | |     | | |   |       | | |     |   | |     | +---------|---+ +-------|---|-------+     |     |   |     |     | | | |     | | | | |   | | +---|---------|---+ |   |     | | | |
   |     | | |   | |   | |     | | |   |       | | |     |   | |     | |   | |   | | |       | | | | |   |       |     |   |     |     | | | |     | | | | |   | |     | | | | | | | | |   |     | | | |
   |     | | |   | |   | |     | | |   |       | | |     |   | |     | |   | |   | | |       | | | | |   |       |     +---------------|---|-|-----|-----+ |   | |     | | | | | | | | |   |     | | | |
   |     | | |   | |   | |     | | |   |       | | |     |   | |     | |   | |   | | |       | | | | |   |       |         |     |     | | | |     | | |   |   | |     | | | | | | | | |   |     | | | |
   |     | | |   | |   | |     | | |   |       | | |     |   | |     | |   | |   | | |       | | | | |   | +-------+ +-+   |   +-|-----|-----|-----|-|-|-------|-|-------|-|-|-|---+ | |   |     +-+ | |
   |     | | |   | |   | |     | | |   |       | | |     |   | |     | |   | |   | | |       | | | | |   | |     | | | |   |   | |     | | | |     | | |   |   | |     | | | | | |   | |   |         | |
   |     | | |   | | +-|-------|-------|-----------------------------------|-+   | | |       | | | | |   | |     | | | +---------------|---|-|-----|-|-|-------|-|-------+ | | | | +-|-|---|-+   +-+ | |
   |     | | |   | | | | |     | | |   |       | | |     |   | |     | |   |     | | |       | | | | |   | |     | | |     |   | |     | | | |     | | |   |   | |     |   | | | | | | |   | |   | | | |
   |     | | |   | | | | |     | | |   |       | | |     |   | | +---|-|---------|-|---------|-|---|-|-----|-----|-|-|-----+ +---------+ | | |     | | |   |   | |     +---|-|-|-|-+ | |   | +-----+ | |
   |     | | |   | | | | |     | | |   |       | | |     |   | | |   | |   |     | | |       | | | | |   | |     | | |       | | |       | | |     | | |   |   | |         | | | |   | |   |     |   | |
   |     | | |   | | | | |     | | |   |       +-------------|-|-----------------|-----------|-|-----|-----|-----|-|-----+   | | |       | | |     | | |   |   | |         | | | |   | |   |     |   | |
   |     | | |   | | | | |     | | |   |         | |     |   | | |   | |   |     | | |       | | | | |   | |     | | |   |   | | |       | | |     | | |   |   | |         | | | |   | |   |     |   | |
   |     | | |   | | | | | +-----|-|-----+       | |     |   | | |   | |   |     | | |       | | | | |   | |     | | |   |   | | |       | | |     | | |   |   | |         | | | +---------|---+ |   | |
   |     | | |   | | | | | |   | | |   | |       | |     |   | | |   | |   |     | | |       | | | | |   | |     | | |   |   | | |       | | |     | | |   |   | |         | | |     | |   |   | |   | |
   |     | | |   | | | | | |   | | |   | |       | |     |   | | |   | |   |     | | |       | | | | |   | |     | | |   |   | | |       | | |     | | |   |   | |         | | |     | |   |   +-|-+ | |
   |     | | |   | | | | | |   | | |   | |       | |     |   | | |   | |   |     | I |       | | | | |   | |     | | |   |   | | |       | | |     | | |   |   | |         | | |     | |   |     | | | |
   |     | | | +-|---------|-----|---------------------------+ | |   | |   |     | | |       | | | | |   | |   +-|-------+   | | |       | | |     | | |   |   | |         | | |     | |   | +-+ | | | |
   |     | | | | | | | | | |   | | |   | |       | |     |     | |   | |   |     | | |       | | | | |   | |   | | | |       | | |       | | |     | | |   |   | |         | | |     | |   | | | | | | |
   |     +-|---|-------|---|-----|-|-----|---------------|-----|-----|-----------|---|-----------|-|-----|-----|---------------|---------|-|-|-+   | | | +-------|-------+ | | |     | |   | | | | | | |
   |       | | | | | | | | |   | | |   | |       | |     |     | |   | |   |     | | |       | | | | |   | |   | | | |       | | |       | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
   |       | | +---|-|-+ +---------+   | |       +-------|-----|-----|---------------------+ | | | | |   | |   | | | |       | | |       | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
   |       | |   | | |     |   | |     | |         |     |     | |   | |   |     | | |     | | | | | |   | |   | | | |       | | |       | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
 +-|-------|---+ | | |     |   | |     | |   +-----------------|-|---------------|---+     | | | | | |   | +---|---|-----------|-|---+   | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
 | |       | | | | | |     |   | |     | |   |     |     |     | |   | |   |     | |       | | | | | |   |     | | | |       | | |   |   | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
 | |       | | | | | |     |   | |     | |   |     |     |     | |   | |   |     | |       | | | | | |   |     | | | | +-+   | | |   |   | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
 | |       | | | | | |     |   | |     | |   |     |     |     | |   | |   |     | |       | | | | | |   |     | | | | | |   | | |   |   | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
 | |       | | | | | |     |   | |     | |   |     |     |   +---|---|-|-------------------------|-+ |   |     | | | | | |   | | |   |   | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
 | |       | | | | | |     |   | |     | |   |     |     |   | | |   | |   |     | |       | | | |   |   |     | | | | | |   | | |   |   | | | |   | | | | |   | |       | | | |     | |   | | | | | | |
 +-|-------|---|-----|-----|-----------|-------------------------|---|-+   |     | |       | | | |   |   |     | | | | | |   | | |   +-----|-----------|---|---|---+     | | | |     | |   | | | | | | |
   |       | | | | | |     |   | |     | |   |     |     |   | | |   |     |     | |       | | | |   |   |     | | | | | |   | | |       | | | |   | | | | |   | | |     | | | |     | |   | | | | | | |
 +-------------|-|-|-------|-----|-------|---------|---------|-------------------|-|---------+ +-|---|-----+   | | | | | |   | | |       | | | |   | | | | |   | | |     | | | |     | |   | | | | | | |
 | |       | | | | | |     |   | |     | |   |     |     |   | | |   |     |     | |       |     |   |   | |   | | | | | |   | | |       | | | |   | | | | |   | | |     | | | |     | |   | | | | | | |
 +-|-------------|---------|---|-|-----|-|-------------------|-|-----|-----|---------+     |     |   |   | |   | | | | | |   | | |       | | | |   | | | | |   | | |     | | | |     | |   | | | | | | |
   |       | | | | | |     |   | |     | |   |     |     |   | | |   |     |     | | |     |     |   |   | |   | | | | | |   | | |       | | | |   | | | | |   | | |     | | | |     | |   | | | | | | |
   |       | | | | | |     | +-----------|---|---+ |     |   | | |   |     |     | | |     |     |   |   | |   | | | | | |   | | |       | | | |   | | | | |   | | |     | | | |     | |   | | | | | | |
   |       | | | | | |     | | | |     | |   |   | |     |   | | |   |     |     | | |     |     |   |   | |   | | | | | |   | | |       | | | |   | | | | |   | | |     | | | |     | |   | | | | | | |
   |       | | | | | |     | | | |     +-----|---|-----------|-|-|---------|-----|-|-------------|---|-------+ | | | | | |   | | |       | | | |   | | | | |   | | +---------|-|-----------|---|-+ | | |
   |       | | | | | |     | | | |       |   |   | |     |   | | |   |     |     | | |     |     |   |   | | | | | | | | |   | | |       | | | |   | | | | |   | |       | | | |     | |   | | |   | | |
   |       | | | | | |     | | | |       +---------|-----|---|-|-----|-----|-----|-|-|-----|-+   |   |   | | | | | | | | |   | | |       | | | |   | | | | |   | |       | | | |     | |   | | |   | | |
   |       | | | | | |     | | | |           |   | |     |   | | |   |     |     | | |     | |   |   |   | | | | | | | | |   | | |       | | | |   | | | | |   | |       | | | |     | |   | | |   | | |
   |       | | | | | |     | | | |           |   | |     |   | | |   |     |     | | |     | |   |   | +-|-|---|---|---|-------|-----------|-|-+ +-|-|-----+   | |       | | | |     | |   | | |   | | |
   |       | | | | | |     | | | |           |   | |     |   | | |   |     |     | | |     | |   |   | | | | | | | | | | |   | | |       | | |   | | | | |     | |       | | | |     | |   | | |   | | |
   |       | | | | | +-----|-|-+ |           |   | |     |   | | |   +-----------|---|-----|-|-------|-|---|-|N|-|-----|-------|-|-----------|---|-|-----|-+   | |       | | | |     | |   | | |   | | |
   |       | | | | |       | |   |           |   | |     |   | | |         |     | | |     | |   |   | | | | | | | | | | |   | | |       | | |   | | | | | |   | |       | | | |     | |   | | |   | | |
   |       | | +-|-|-------|-|---|-------+   |   | |     |   | | |         |     | | |     | |   |   | | | | | | | | | | |   | | |       | | |   | | | | | +-----+       | | | |     | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |     | | |     | |   |   | | | | | | | | | | |   | | |       | | |   | | | | |     |         | | | |     | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |     | | |     | |   |   | | | | | | | | | | |   | | |       +---|-------|---|-+   |         | | | |     | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |     | | |     | |   |   | | | | | | | | | | |   | | |         | |   | | | | | |   |         | | | |     | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |     +---|-----|-----------|-|-|-|-----|-|---|---|-+ |         | |   | | | | | |   |         +-|-|-|-+   | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | | | | | | |   |   |         | |   | | | | | |   |           | | | |   | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | | | | | | |   |   |         | |   | | | | | |   |           | | | |   | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | | | | | | |   |   |         | |   | | | | | |   |           | | | |   | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | | | | | | |   |   |         | |   | | | | | |   |           | | | |   | |   | | |   | | |
   |       | |   | |       | |   |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | | | | | | |   |   |         | |   | | | | | |   |           | | | |   | |   | | |   | | |
   |       | |   | |   +---+ +---|-------|---------------|---|---|-------------------|-------------------|-|---|-|-|---|-|-------------------|-----|-----|-|---|---+       | | | |   | |   | | |   | | |
   |       | |   | |   |         |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | | | | | | |   |   |         | |   | | | | | |   |   |       | | | |   | |   | | |   | | |
   |       | |   | |   |         |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | | | | | | |   |   |         | |   | | | | | |   |   |       | | | |   | |   | | |   | | |
   |       | |   | |   |         |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | | | | | | |   |   |         | |   | | | | | |   |   |       | | | |   | |   | | |   | | |
   |       +-----|---------------|-----------|---|-------|-----------------|-------|-------|-----------|-------|-+ | | | |   |   |         | |   | | | | | |   |   |       | | | |   | |   | | |   | | |
   |         |   | |   |         |       |   |   | |     |   | | |         |       | |     | |   |   | | | | | |   | | | |   |   |         | |   | | | | | |   |   |       | | | |   | |   | | |   | | |
   |         |   | |   |         |       |   |   | |   +-|---|---|-------------------|-----|-----|-----|-|-|-|-----------+   |   |         | |   | | | +-|-|---+   |       | | | |   | |   | | |   | | |
   |         |   | |   |         |       |   |   | |   | |   | | |         |       | |     | |   |   | | | | | |   | | |     |   |         | |   | | |   | |       |       | | | |   | |   | | |   | | |
   |       +-----|---------------|-------|---|---+ |   | |   | | |         | +-----|-|-----|-|---|---|---|-|-|---------|---------|---------|---------+   | +-----------+   | | | |   | |   | | |   | | |
   |       | |   | |   |         |       |   |     |   | |   | | |         | |     | |     | |   |   | | | | | |   | | |     |   |         | |   | |     |         |   |   | | | |   | |   | | |   | | |
   |       | |   | |   |         |       |   |     |   | |   | | |         | |     | |     | |   |   | | | | | |   | | |     |   |         | |   +-|---------------|---|---|---|-|---------|-|---+ | | |
   |       | |   | |   |         |       |   |     |   | |   | | |         | |     | |     | |   |   | | | | | |   | | |     |   |         | |     |     |         |   |   | | | |   | |   | | | | | | |
   |       | |   | |   |         |       |   |     |   | |   | | |         | |     | |     | |   +-------|-|-|-------|-------|---|---------|-------|-----------+ +-|---+   | | | |   | |   | | | | | | |
   |       | |   | |   |         |       |   |     |   | |   | | |         | |     | |     | |       | | | | | |   | | |     |   |         | |     |     |     | | |       | | | |   | |   | | | | | | |
   |       | |   | |   |         |       |   |     |   | |   | | |         | |     | +-------|---------|-----|---------|---------------------|-----|-----------|-|-----------|-+ |   | |   | | | | | | |
   |       | |   | |   |         |       |   |     |   | |   | | |         | |     |       | |       | | | | | |   | | |     |   |         | |     |     |     | | X       | |   |   | |   | | | | | | |
   |       | |   | |   |         |       |   |   +-----|-----|-|-|---------+ |     | +-----------+   | | | | | |   | | |     |   |         | |     |     | +-----------+ +-|---+ |   +-|-------|-+ | | |
   |       | |   | |   |         |       |   |   | |   | |   | | |           |     | |     | |   |   | | | | | |   | | |     |   |         | |     |     | |   | | |   | | | | | |     |   | | |   | | |
   |       | |   | |   |         |       |   |   | |   | |   | | +-----------------|-|---+ | |   |   +-------|-|-------------|-------------|-----+ |     | |   | +-|---|-----|-+ |     |   | | |   | | |
   |       | |   | |   |         |       |   |   | |   | |   | |             |     | |   | | |   |     | | | | |   | | |     |   |         | |   | |     | |   |   |   | | | |   |     |   | | |   | | |
 +---------|-----------|-----------------|---|---|-----|-+   | |             |     | |   | | |   +-----|-|-|---|-------|-----|---------------|-----|-----|-|---|-----------|-----|---------|-----+ | | |
 | |       | |   | |   |         |       |   |   | |   |     | |             |     | |   | | |         | | | | |   | | |     |   |         | |   | |     | |   |   |   | | | |   |     |   | | | | | | |
 | +---+   | |   | |   |   +---------------------|-----|-----|-|-------------|-----|-----|-|-----------|-|-|-|-|---|-------------|---------|-----+ |   +-----------|---------|---|-----|-----|-|---|-+ |
 |     |   | |   | |   |   |     |       |   |   | |   |     | |             |     | |   | | |         | | | | |   | | |     |   |         | |     |   | | |   |   |   | | | |   |     |   | | | | |   |
 |     | +---|---|-----|---|-----|-------|-------|-----------|---------------------------|-|-|---------------------|-|-|---------------------|---+ |   | | |   |   |   | | | |   |     |   | | | | |   |
 |     | | | |   | |   |   |     |       |   |   | |   |     | |             |     | |   | | |         | | | | |   | | |     |   |         | |   | |   | | |   |   |   | | | |   |     |   | | | | |   |
 |     | | | |   | |   |   |     |       |   |   | |   |     | |             +-------|-----|-----------------+ | +-+ | |     |   |         | |   | |   +-|-|---|-+ |   | | | |   |     |   | | | | |   |
 |     | | | |   | |   |   |     |       |   |   | |   |     | |                   | |   | | |         | | |   | |   | |     |   |         | |   | |     | |   | | |   | | | |   |     |   | | | | |   |
 |     | | | | +-|-----|---+     |       |   |   | |   |     | |                   | | +-|-|-------------|-|-----|---------+ |   |         | |   | |     | |   | | |   | | | |   |     |   | | | | |   |
 |     | | | | | | |   |         |       |   |   | |   |     | |                   | | | | | |         | | |   | |   | |   | |   |         | |   | |     | |   | | |   | | | |   |     |   | | | | |   |
 |     | | | | | | |   |         |       |   |   +-|-----+   | |                   | | | | | |         | | |   | |   | |   | |   |         | |   | |     | |   | | |   | | | |   |     |   | | | | +-+ |
 |     | | | | | | |   |         |       |   |     |   | |   | |                   | | | | | |         | | |   | |   | |   | |   |         | |   | |     | |   | | |   | | | |   |     |   | | | |   | |
 +-----|-|-|-------|---|---------|-------|---------|---|-----|-|-------------------|-------|-------------|-----|-|---------|-|---------------|---|-----------------|-------|-|---|-----------|---------+
       | | | | | | |   |         |       |   |     |   | |   | |                   | | | | | |         | | |   | |   | |   | |   |         | |   | |     | |   | | |   | | | |   |     |   | | | |   |
 +---------+ | | | |   |         | +-----|---|-----|-----|---|-|-------------------------|-|-|-----------|-|-----|---------|-----|-----------------|-----|-----|-|-------|-----------------|---------+
 |     | |   | | | |   |         | |     |   |     |   | |   | |                   | | | | | |         | | |   | |   | |   | |   |         | |   | |     | |   | | |   | | | |   |     |   | | | |
 |     | |   | | | |   |         | |     |   |     |   | |   | |                   | +---|-|-----------|-|-|-----|---------|-----|-----------|---|-|---+ | |   | | |   | | +-----------|-+ | | | |
 |     | |   | | | |   |         | |     |   |     |   | |   | |                   |   | | | |         | | |   | A   | |   | |   |         | |   | |   | | |   | | |   | |   |   |     | | | | | |
 +-----|-----|-|---|-+ |         | |   +---+ +-----|---|-------------------------+ |   | | | |         +---------|---------------|-----------|-----|-+ | | |   | | |   +-|-------------|-|-|-|---|---+
       | |   | | | | | |         | |   | | |       |   | |   | |                 | |   | | | |           | |   | |   | |   | |   |         | |   | | | | | |   | | |     |   |   |     | | | | | |   |
       | |   | | | | | |         | |   | | |       |   | |   | |                 | |   +-----|-----------|-+   | |   | |   | |   |         | |   | | +-+ | |   | | | +---|---|---+     | | | | | +---+
       | |   | | | | | |         | |   | | |       |   | |   | |                 | |     | | |           |     | |   | |   | |   |         | |   | |     | |   | | | |   |   |         | | | | |
       | |   | | | | | |         +-|-----|-|-------|-----------+                 | |     | | |           |     | |   | |   | |   |         | |   | |     | |   | | | |   |   |   +-+   | | | | |
       | |   | | | | | |           |   | | |       |   | |   |                   | |     | | |           |     | |   | |   | |   |         | |   | |     | |   | | | |   |   |   | |   | | | | |
       | |   | +-----|-|-----------|-+ | | |       |   | |   |                   +-------|-|-------------|-----|-----|-----|---------------------|-|-------|---|-|---|---|---|-----|-----|---+ |
       | |   |   | | | |           | | | | |       |   | |   |                     |     | | |           |     | |   | |   | |   |         | |   | |     | |   | | | |   |   |   | |   | | |   |
       | |   |   | | | |           | | | | |       |   | |   |                 +---|---+ | | |           |     | | +-|-|---+ |   |         +-+   | |     | |   | | | |   +---|---|-|---|-------|-+
       | |   |   | | | |           | | | | |       |   | |   |                 |   |   | | | |           |     | | | | |     |   |               | |     | |   | | | |       |   | |   | | |   | |
       | |   |   | | | +-------------|-+ | |     +-|-----------------------------------+ | | |       +---|-----+ | | | |     |   |               | |     | |   | | +-|-----------+ |   | | |   | |
       | |   |   | | |             | |   | |     | |   | |   |                 |   |     | | |       |   |       | | | |     |   |               | |     | |   | |   |       |     |   | | |   | |
   +---|-|-------|-+ |             | +---|-------+ |   | |   +---------------------------|-----------|---|-------|-----|-----|---------------------------------|-------------------+   | | |   | |
   |   | |   |   |   |             |     | |       |   | |                     |   |     | | |       |   |       | | | |     |   |               | |     | |   | |   |       |         | | |   | |
   |   | |   |   |   |             |     | +-------|---+ +-------------+       +---+     +-|-|-------|-------------|-|---------------------------|-+     | |   | |   |       |         | | |   | |
   |   | |   |   |   |             |     |         |                   |                   | |       |   |       | | | |     |   |               |       | |   | |   |       |         | | |   | |
   | +-------|---+   |             |     |         |                   |                   | |       |   |       | | +-+     +-------------------|-----+ +-+   +-----|-+     |         +---+   | |
   | | | |   |       |             |     |         |                   |                   | |       |   |       | |             |               |     |         |   | |     |           |     | |
   | | | |   |       |             |     |         |             +-----|-------------------|---------|---|-------|-|---+         |               |     |         |   | |     |           |     | |
   | | | |   |       |             |     |         |             |     |                   | |       |   |       | |   |         |               |     |         |   | |     |           |     | |
 +-+ +---|-----------|-----------------------------------------------------------------------|-------|-----------|-----|-----------------------------------+     |   +-------------------+   +-|-+
 |     | |   |       |             |     |         |             |     |                   | |       |   |       | |   |         |               |     |   |     |     |     |               | P
 |   +-------|---------+           |     |         +-------------|-------------------------|---------|---|---------|-------------|-------------------------+     |     +-----------------+   | |
 |   | | |   |       | |           |     |                       |     |                   | |       |   |       | |   |         |               |     |         |           |           |   | |
 |   | | |   |       | |           |     +-----------------------------|-----+             | +-------|-------------|---+         |               +-----|---+     |           |           |   | |
 |   | | |   |       | |           |                             |     |     |             |         |   |       | |             |                     |   |     |           |           |   | |
 |   +---+   |     +-|-------------+                             |     |     |             +---------+   +-------+ +-------------+                     +---+     |           |           +---+ |
 |     |     |     | | |                                         |     |     |                                                                                   |           |                 |
 +-----+     +-----+ +-+                                         +-----+     +-----------------------------------------------------------------------------------+           +-----------------+
                                                                                                                                                                                                         `;

map = `     |
     |  +--+
     A  |  C
 F---|--|-E---+
     |  |  |  D
     +B-+  +--+
                 `;

map = map.split("\n");

let currentX = map[0].indexOf("|");
let currentY = 0;

let dir = "S";

let result = {
    succeed: true
};

let string = [];

while(result.succeed){
    let char = map[currentY][currentX];
    if(char !== " " && char !== "+" && char !== "|" && char !== "-"){
        string.push(char);
        console.log(char);
        console.log(string);
    }
    result = checkNextValue(currentX, currentY, dir);
    currentX = result.x;
    currentY = result.y;
    dir = result.dir;
}

console.log(string.join(""));

function checkNextValue(x, y, dir, startDir, dirs){
    // console.log(x, y, dir, startDir, dirs);
    if(startDir == undefined) startDir = dir;
    let nextX = x;
    let nextY = y;
    switch (dir) {
        case "N":
            if(dirs == undefined) dirs = ["E", "W", "L"];
            nextY--;
            break;
        case "E":
            if(dirs == undefined) dirs = ["N", "S", "L"];
            nextX++;
            break;
        case "S":
            if(dirs == undefined) dirs = ["E", "W", "L"];
            nextY++;
            break
        case "W":
            if(dirs == undefined) dirs = ["N", "S", "L"];
            nextX--;
            break;
        default:

    }
    // console.log("nextCHAR:", map[nextY][nextX], nextX, nextY);
    if(map[nextY][nextX] !== " " && map[nextY][nextX] !== undefined){
        return {
            succeed: true,
            x: nextX,
            y: nextY,
            dir: dir
        };
    } else {
        if(dirs !== undefined && dirs[0] == "L") return {succeed: false};

        let newDir = dirs.shift();

        console.log(startDir, dir, newDir);
        return checkNextValue(x, y, newDir, startDir, dirs);
    }

}
